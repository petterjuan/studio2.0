# VM Fitness Hub - Headless E-Commerce & Content Platform

## üöÄ Tech Stack

- **Framework:** [Next.js](https://nextjs.org/) 15.0.0
- **Language:** [TypeScript](https://www.typescriptlang.org/) 5
- **UI Framework:** [React](https://reactjs.org/) 18.3.1
- **Styling:** [Tailwind CSS](https://tailwindcss.com/)
- **UI Components:** [ShadCN UI](https://ui.shadcn.com/)
- **Backend (BaaS):** [Firebase](https://firebase.google.com/) 10.12.4 (Authentication, Firestore, App Hosting)
- **Payments:** [Stripe](https://stripe.com/) 16.5.0
- **Personalization Engine:** [Genkit](https://firebase.google.com/docs/genkit) (with Google's Gemini) 1.0.0
- **Form Management:** [React Hook Form](https://react-hook-form.com/) 7.52.1 & [Zod](https://zod.dev/) 3.24.2

![VM Fitness Hub Hero Image](https://images.unsplash.com/photo-1586323289103-e309634e2a1b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw5fHxmaXRuZXNzJTIwd29tYW58ZW58MHx8fHwxNzU5NzY3MDA5fDA&ixlib=rb-4.1.0&q=80&w=1080)

## Project Summary

**VM Fitness Hub** is a headless, high-performance digital experience platform (DXP) engineered with Next.js. It provides a sophisticated frontend architecture for a premium e-commerce and content ecosystem. The platform leverages server-side rendering (SSR) and a robust technology stack to deliver a polished user interface for browsing exclusive digital products, consuming insightful blog articles, and engaging with AI-driven personalization tools, including a smart shopping assistant and custom workout and recipe generators. The backend is powered by Firebase for seamless user authentication, data persistence, and administration, while secure payment processing is orchestrated through Stripe.

This project is architected for automated, scalable deployment on **Firebase App Hosting**.

---

## ‚ú® Key Features

- **Next.js 15 Architecture:** Built on the Next.js App Router, this project utilizes Server Components by default to minimize client-side JavaScript, optimize rendering performance, and enhance SEO.
- **Systematized UI/UX:** The user interface is constructed with a design system approach, using **Tailwind CSS** and **ShadCN UI** for a fully responsive, aesthetically consistent experience. The theme is defined by a sophisticated brown and beige color palette with distinct schemas for light and dark modes.
- **Headless Commerce Engine:** Provides a curated shopping experience for digital products, integrating with **Stripe Checkout** via server-side session creation. The system is designed to function in a "simulation mode" if Stripe keys are not provided, enabling development and testing without live credentials.
- **Automated Content Ingestion Pipeline:** A dynamic content hub featuring articles by Valentina Montero. New, SEO-optimized articles are **autonomously generated by an AI** on a weekly basis via a scheduled cron job, ensuring a continuous stream of fresh content with zero manual intervention.
- **Secure Identity and Access Management (IAM):** A complete user authentication system featuring registration and login flows, with Role-Based Access Control (RBAC) for administrative functions, all managed by **Firebase Authentication**.
- **Scalable NoSQL Data Persistence:** User profiles, RBAC roles, personalized workout plans, and AI-generated articles are stored in **Cloud Firestore**, providing a scalable and real-time database solution.
- **Authenticated User Portal:** A private, authenticated dashboard where users can manage their saved workout plans and access purchased digital content.
- **Proprietary Generative AI Engine:**
    - **Workout Plan Generator:** A custom engine that creates personalized weekly workout plans based on user-defined goals, experience levels, and preferences.
    - **Recipe Generator:** An AI tool that synthesizes novel recipes from a primary ingredient and dietary constraints.
    - **Shopping Assistant:** An intelligent, context-aware chatbot that assists users with product discovery and queries by dynamically using a `searchProducts` tool against the product catalog.
- **Role-Based Access Control (RBAC) for Administration:** A protected administrative panel, gated by user roles, for supervisors to review and manage all user-generated workout plans.
- **CI/CD-Optimized for Firebase App Hosting:** Pre-configured for zero-friction, automated deployments on **Firebase App Hosting**, with infrastructure-as-code definitions in `apphosting.yaml`.

---

## üõ†Ô∏è Setup and Local Development

Follow these steps to instantiate the project on your local machine. This is a crucial step to ensure all services, including Firebase and Stripe, are properly connected.

### 1. Prerequisites

- Node.js (v20 or higher recommended)
- npm (or pnpm/yarn)
- A Firebase project (provision one for free at [firebase.google.com](https://firebase.google.com/))
- A Stripe account (for payment processing)

### 2. Clone the Repository (if applicable)

```bash
git clone [REPOSITORY_URL]
cd [REPOSITORY_NAME]
```

### 3. Install Dependencies

Install all project dependencies.

```bash
npm install
```

### 4. Configure Environment Variables

This is the most critical step for launching the application. All secrets and configuration values are managed in a single `.env` file, which must be created at the project root. **Never commit the `.env` file to version control.**

Create a file named `.env` in the project root and populate it with the required environment variables for Firebase, Stripe, and Google AI, replacing placeholder values with your actual credentials.

### 5. Run the Development Server

Once the environment variables are configured, you can start the Next.js development server.

```bash
npm run dev
```

The application will be available at `http://localhost:9000`.

---

## üîß Key Integrations

### Firebase

- **Authentication:** The authentication flow employs a hybrid client-server strategy. User creation (`createUserWithEmailAndPassword`) is handled on the client-side to establish an immediate session. Server Actions then leverage the session's auth token to securely create a corresponding user document in Firestore with server-validated data, mitigating tampering risks.
- **Firestore:** Utilized for storing user profiles (including an `isAdmin` boolean for RBAC), user-generated workout plans, and AI-generated blog articles.
- **Server SDK:** The Firebase Admin SDK (`firebase-admin`) is used within Server Actions to execute privileged backend operations, such as querying data for all users in the administrative panel.

### Stripe

The payment flow is orchestrated via **Stripe Checkout**.
1.  A user initiates a purchase from a product or coaching page.
2.  A **Server Action** is invoked to handle the request.
3.  This action securely creates a Stripe `checkout.Session` on the server-side, referencing a predefined `stripePriceId` associated with each product.
4.  The application redirects the user to the secure Stripe-hosted checkout URL.
5.  **Important:** If the `STRIPE_SECRET_KEY` is not present in the `.env` file, this flow operates in **simulation mode**. The user is redirected directly to a success page, enabling local development and end-to-end testing without requiring live Stripe credentials.

### Personalization Engine (Genkit)

- **Workout Plan Generator:** The `workoutPlanGeneratorFlow` (`src/ai/flows/workout-plan-generator.ts`) utilizes a structured prompt with Zod schema validation to produce high-quality, personalized weekly workout plans based on user inputs.
- **Recipe Generator:** The `recipeGeneratorFlow` (`src/ai/flows/recipe-generator.ts`) generates recipes from a specified ingredient and dietary preferences, with built-in validation for inputs.
- **Shopping Assistant:** The `shoppingAssistantFlow` (`src/ai/flows/shopping-assistant.ts`) processes the user's query and chat history. It leverages a `searchProductsTool` to grant the model the agency to dynamically query the product catalog and provide intelligent, context-aware recommendations.
- **Automated Blog Writer:** The `blogGeneratorFlow` (`src/ai/flows/blog-generator.ts`) is triggered by a weekly cron job. It generates a new, SEO-friendly article on a relevant fitness topic and persists it directly to the Firestore database.

---

## üöÄ Deployment

This project is optimized for **Firebase App Hosting**.

Deployment is managed automatically through the Firebase Studio workflow. Committing a change can trigger a new build and deployment cycle.

The `apphosting.yaml` file in the root directory contains the declarative configuration for the App Hosting environment, including the scheduled job for automated content creation. No manual CI/CD pipeline configuration is necessary.
